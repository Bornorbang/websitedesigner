{% extends 'master.html' %}
{% load static %}

{% block title %}{{ blog.title }}{% endblock %}

{% block meta_description %}{{ blog.meta_description}}{% endblock %}

{% block og_title %}{{ blog.title }} | Website Designer Nigeria{% endblock %}
{% block og_description %}{{ blog.meta_description|default:blog.content|truncatewords:30 }}{% endblock %}
{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}
{% block og_image %}{{ request.scheme }}://{{ request.get_host }}{{ blog.image.url }}{% endblock %}

{% block twitter_title %}{{ blog.title }}{% endblock %}
{% block twitter_description %}{{ blog.meta_description|default:blog.content|truncatewords:30 }}{% endblock %}
{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}{{ blog.image.url }}{% endblock %}

{% block extra_meta %}
    <meta property="article:published_time" content="{{ blog.date|date:"c" }}">
    <meta property="article:author" content="{{ blog.author }}">
    <meta property="article:section" content="{{ blog.category.name }}">
{% endblock %}

{% block content %}

<!-- Hero Image Section -->
<section class="relative h-[50vh] min-h-[300px] md:min-h-[400px] overflow-hidden">
    <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="w-full h-full object-cover">
    <div class="absolute inset-0 bg-gradient-to-br from-primary-600/30 to-black/30"></div>
</section>

<!-- Blog Content Section -->
<section class="py-12 md:py-16 bg-gradient-to-b from-gray-50 to-white min-h-screen">
    <div class="max-w-7xl mx-auto px-6">
        <div class="grid lg:grid-cols-12 gap-8">
            
            <!-- Main Content Column -->
            <div class="lg:col-span-9 space-y-8">
                
                <!-- Blog Header -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-10 border-t-4 border-primary-600 wow fadeInUp" data-wow-delay="0.1s">
                    <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-6 leading-tight">
                        {{ blog.title }}
                    </h1>
                    
                    <!-- Meta Info -->
                    <div class="flex flex-wrap gap-4">
                        <div class="flex items-center px-4 py-2 bg-gray-100 rounded-full hover:bg-primary-600 hover:text-white transition-all group">
                            <i class="far fa-user mr-2 text-primary-600 group-hover:text-white"></i>
                            <span class="font-semibold">{{ blog.author }}</span>
                        </div>
                        <div class="flex items-center px-4 py-2 bg-gray-100 rounded-full hover:bg-primary-600 hover:text-white transition-all group">
                            <i class="far fa-list-alt mr-2 text-primary-600 group-hover:text-white"></i>
                            <a href="{% url 'category_posts' category_slug=blog.category.slug %}" class="font-semibold group-hover:text-white">{{ blog.category }}</a>
                        </div>
                        <div class="flex items-center px-4 py-2 bg-gray-100 rounded-full hover:bg-primary-600 hover:text-white transition-all group">
                            <i class="far fa-calendar-alt mr-2 text-primary-600 group-hover:text-white"></i>
                            <span class="font-semibold">{{ blog.date|date:"F d, Y" }}</span>
                        </div>
                        <div class="flex items-center px-4 py-2 bg-gray-100 rounded-full hover:bg-primary-600 hover:text-white transition-all group">
                            <i class="far fa-comments mr-2 text-primary-600 group-hover:text-white"></i>
                            <span class="font-semibold">{{ blog.comments_count }} Comments</span>
                        </div>
                    </div>
                </div>

                <!-- Article Content -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-10 lg:p-16 border-t-4 border-primary-600 wow fadeInUp" data-wow-delay="0.2s">
                    <article class="prose prose-lg max-w-none">
                        {{ blog.content | safe }}
                    </article>
                </div>

                <!-- Social Share -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 text-center wow fadeInUp" data-wow-delay="0.2s">
                    <h4 class="text-2xl font-bold text-gray-900 mb-6">Share this post</h4>
                    <div class="flex items-center justify-center gap-4 flex-wrap">
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
                           target="_blank" 
                           class="w-14 h-14 flex items-center justify-center bg-blue-600 text-white rounded-full hover:scale-110 hover:shadow-xl transition-all duration-300">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                        <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ blog.title }}" 
                           target="_blank" 
                           class="w-14 h-14 flex items-center justify-center bg-sky-500 text-white rounded-full hover:scale-110 hover:shadow-xl transition-all duration-300">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="https://wa.me/?text={{ blog.title }}%20{{ request.build_absolute_uri|urlencode }}" 
                           target="_blank" 
                           class="w-14 h-14 flex items-center justify-center bg-green-500 text-white rounded-full hover:scale-110 hover:shadow-xl transition-all duration-300">
                            <i class="fab fa-whatsapp text-xl"></i>
                        </a>
                        <a href="https://t.me/share/url?url={{ request.build_absolute_uri|urlencode }}&text={{ blog.title }}" 
                           target="_blank" 
                           class="w-14 h-14 flex items-center justify-center bg-blue-500 text-white rounded-full hover:scale-110 hover:shadow-xl transition-all duration-300">
                            <i class="fab fa-telegram-plane text-xl"></i>
                        </a>
                    </div>
                </div>

                <!-- Leave a Reply -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 wow fadeInUp" data-wow-delay="0.3s">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center pb-4 border-b-4 border-primary-600">Leave a Reply</h3>
                    <form action="{% url 'blog_detail' category_slug=blog.category.slug slug=blog.slug %}" method="post" class="space-y-6">
                        {% csrf_token %}
                        <div>
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">Name *</label>
                            <input type="text" 
                                   id="name" 
                                   name="name" 
                                   required
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary-600 focus:ring focus:ring-primary-200 transition-all bg-gray-50 focus:bg-white">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                            <input type="email" 
                                   id="email" 
                                   name="email" 
                                   required
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary-600 focus:ring focus:ring-primary-200 transition-all bg-gray-50 focus:bg-white">
                        </div>
                        <div>
                            <label for="comment" class="block text-sm font-semibold text-gray-700 mb-2">Comment *</label>
                            <textarea id="comment" 
                                      name="comment" 
                                      rows="5" 
                                      required
                                      class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-primary-600 focus:ring focus:ring-primary-200 transition-all bg-gray-50 focus:bg-white"></textarea>
                        </div>
                        <button type="submit" 
                                class="px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-bold rounded-full hover:from-primary-700 hover:to-primary-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl uppercase tracking-wide">
                            Post Comment
                        </button>
                    </form>
                </div>

                <!-- Banner Ad -->
                <div class="wow zoomIn" data-wow-delay="0.4s">
                    <a href="https://www.websitedesigner.ng/web-development-pricing/" target="_blank">
                        <img src="{% static 'img/business deserves.png' %}" 
                             alt="{{ blog.title }}" 
                             class="w-full rounded-2xl shadow-lg hover:shadow-2xl transition-shadow duration-300">
                    </a>
                </div>

                <!-- Comments Section -->
                {% if comments %}
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 wow fadeInUp" data-wow-delay="0.5s">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center pb-4 border-b-4 border-primary-600">Comments</h3>
                    <div class="space-y-4">
                        {% for comment in comments %}
                        <div class="bg-gray-50 rounded-xl p-6 border-l-4 border-primary-600 hover:translate-x-2 transition-transform">
                            <h5 class="font-bold text-primary-600 mb-2">{{ comment.name }}</h5>
                            <small class="text-gray-500 block mb-3">{{ comment.created_at|date:"F d, Y" }}</small>
                            <p class="text-gray-700">{{ comment.content }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Related Posts -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 wow fadeInUp" data-wow-delay="0.6s">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center pb-4 border-b-4 border-primary-600">Related Posts</h2>
                    <div class="grid md:grid-cols-3 gap-6">
                        {% for related_post in related_posts %}
                        <a href="{% url 'blog_detail' category_slug=related_post.category.slug slug=related_post.slug %}" 
                           class="group bg-gray-50 rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="relative h-48 overflow-hidden">
                                <img src="{{ related_post.image.url }}" 
                                     alt="{{ blog.title }}" 
                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                            </div>
                            <h5 class="p-4 font-semibold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-2">
                                {{ related_post.title }}
                            </h5>
                        </a>
                        {% empty %}
                        <div class="col-span-full text-center text-gray-500 py-8 italic">
                            No related posts found.
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="lg:col-span-3">
                <div class="sticky top-24 space-y-6">
                    <!-- Follow Us -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 wow fadeInUp" data-wow-delay="0.7s">
                        <h4 class="text-xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-primary-600">Follow Us</h4>
                        <div class="flex items-center justify-center gap-4">
                            <a href="https://twitter.com/webdesignerng" 
                               target="_blank" 
                               class="w-12 h-12 flex items-center justify-center bg-sky-500 text-white rounded-full hover:scale-110 transition-transform">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="https://instagram.com/websitedesigner_ng" 
                               target="_blank" 
                               class="w-12 h-12 flex items-center justify-center bg-pink-600 text-white rounded-full hover:scale-110 transition-transform">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="https://tiktok.com/@websitedesigner.ng" 
                               target="_blank" 
                               class="w-12 h-12 flex items-center justify-center bg-black text-white rounded-full hover:scale-110 transition-transform">
                                <i class="fab fa-tiktok"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Categories -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 wow fadeInUp" data-wow-delay="0.8s">
                        <h4 class="text-xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-primary-600">Categories</h4>
                        <ul class="space-y-3">
                            {% for category in categories %}
                            <li class="group pl-6 relative">
                                <span class="absolute left-0 text-primary-600 group-hover:translate-x-1 transition-transform">▶</span>
                                <a href="{% url 'category_posts' category_slug=category.slug %}" 
                                   class="text-gray-700 hover:text-primary-600 transition-colors text-sm">
                                    {{ category.name }}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <!-- Recent Posts -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 wow fadeInUp" data-wow-delay="0.9s">
                        <h4 class="text-xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-primary-600">Recent Posts</h4>
                        <ul class="space-y-3">
                            {% for post in recent_posts %}
                            <li class="group pl-6 relative">
                                <span class="absolute left-0 text-primary-600 group-hover:translate-x-1 transition-transform text-xs mt-1">▶</span>
                                <a href="{% url 'blog_detail' category_slug=post.category.slug slug=post.slug %}" 
                                   class="text-gray-700 hover:text-primary-600 transition-colors text-sm line-clamp-2 leading-relaxed">
                                    {{ post.title }}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <!-- Advertisement -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 wow fadeInUp" data-wow-delay="1.0s">
                        <h4 class="text-xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-primary-600">Advertisement</h4>
                        <div class="space-y-4">
                            {% for banner in banners %}
                            <a href="{{ banner.link|default:'https://www.websitedesigner.ng/contact-website-designer-nigeria' }}" 
                               target="_blank" 
                               class="block rounded-xl overflow-hidden hover:shadow-lg transition-shadow">
                                <img src="{{ banner.image.url }}" 
                                     alt="{{ blog.title }}" 
                                     class="w-full">
                            </a>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4756517876694191"
                            crossorigin="anonymous"></script>
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4756517876694191"
                            data-ad-slot="1067558093"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4756517876694191"
                            crossorigin="anonymous"></script>
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4756517876694191"
                            data-ad-slot="1067558093"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4756517876694191"
                            crossorigin="anonymous"></script>
                        <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-4756517876694191"
                            data-ad-slot="1067558093"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>
            </aside>

        </div>
    </div>
</section>

<style>
    /* Typography for article content */
    .prose {
        color: #374151;
    }
    
    .prose h1 {
        font-size: 2.25rem;
        font-weight: 800;
        color: #111827;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
        line-height: 1.2;
    }
    
    @media (min-width: 768px) {
        .prose h1 {
            font-size: 3rem;
        }
    }
    
    .prose h2 {
        font-size: 1.875rem;
        font-weight: 700;
        color: #111827;
        margin-top: 2.5rem;
        margin-bottom: 1.25rem;
        line-height: 1.3;
    }
    
    @media (min-width: 768px) {
        .prose h2 {
            font-size: 2.25rem;
        }
    }
    
    .prose h3 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #111827;
        margin-top: 2rem;
        margin-bottom: 1rem;
        line-height: 1.4;
    }
    
    @media (min-width: 768px) {
        .prose h3 {
            font-size: 1.75rem;
        }
    }
    
    .prose h4 {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
        margin-top: 1.75rem;
        margin-bottom: 0.875rem;
    }
    
    @media (min-width: 768px) {
        .prose h4 {
            font-size: 1.5rem;
        }
    }
    
    .prose h5 {
        font-size: 1.125rem;
        font-weight: 600;
        color: #111827;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
    }
    
    @media (min-width: 768px) {
        .prose h5 {
            font-size: 1.25rem;
        }
    }
    
    .prose h6 {
        font-size: 1rem;
        font-weight: 600;
        color: #111827;
        margin-top: 1.25rem;
        margin-bottom: 0.625rem;
    }
    
    .prose p {
        margin-bottom: 1.25rem;
        font-size: 0.875rem;
        line-height: 1.625;
        color: #374151;
        text-align: justify;
    }
    
    @media (min-width: 768px) {
        .prose p {
            font-size: 1rem;
        }
    }
    
    .prose a {
        color: #dc2626;
        text-decoration: underline;
        font-weight: 500;
    }
    
    .prose a:hover {
        color: #b91c1c;
    }
    
    .prose strong {
        font-weight: 700;
        color: #111827;
    }
    
    .prose em {
        font-style: italic;
    }
    
    .prose ul, .prose ol {
        margin: 1.5rem 0;
        padding-left: 2rem;
    }
    
    .prose ul {
        list-style-type: disc;
    }
    
    .prose ol {
        list-style-type: decimal;
    }
    
    .prose li {
        margin-bottom: 0.5rem;
        line-height: 1.75;
    }
    
    .prose img {
        border-radius: 0.75rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        margin: 2.5rem auto;
        max-width: 100%;
        height: auto;
        display: block;
    }
    
    /* Prevent content overflow on mobile */
    .prose {
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
    }
    
    .prose * {
        max-width: 100%;
    }
    
    .prose table {
        display: block;
        width: 100%;
        overflow-x: auto;
        border-collapse: collapse;
        margin: 2rem 0;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
    }
    
    .prose th {
        background-color: #EF233C;
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        white-space: nowrap;
    }
    
    .prose td {
        padding: 0.875rem 1rem;
        border: 1px solid #e5e7eb;
        color: #374151;
    }
    
    .prose tr:nth-child(even) {
        background-color: #f9fafb;
    }
    
    .prose blockquote {
        border-left: 4px solid #dc2626;
        padding-left: 1.5rem;
        margin: 2rem 0;
        font-style: italic;
        color: #6b7280;
        background-color: #f9fafb;
        padding: 1.5rem;
        border-radius: 0.5rem;
    }
    
    .prose blockquote p {
        margin-bottom: 0;
    }
    
    .prose pre {
        background-color: #1f2937;
        color: #f3f4f6;
        padding: 1.5rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 2rem 0;
    }
    
    .prose code {
        background-color: #f3f4f6;
        color: #dc2626;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.875em;
        font-family: 'Courier New', monospace;
    }
    
    .prose pre code {
        background-color: transparent;
        color: #f3f4f6;
        padding: 0;
    }
    
    .prose hr {
        border: none;
        border-top: 2px solid #e5e7eb;
        margin: 3rem 0;
    }
    
    /* Mobile responsive adjustments */
    @media (max-width: 768px) {
        .prose p {
            text-align: left;
        }
    }
</style>

{% endblock %}